{% extends "admin/change_form.html" %}
{% block extrahead %}
    {{ block.super }}
    {{ custom_inline_js|safe }}

    <style>
        .highlight-color {
            background-color: #eef8ff;
        }
        .highlight-size {
            background-color: #f3f9ed;
        }
        .highlight-default {
            background-color: #fff;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const rows = document.querySelectorAll('tr.dynamic-options');

            rows.forEach(row => {
                const input = row.querySelector('input[id$="-variation_type"]');

                const applyHighlight = () => {
                    const value = input?.value?.toLowerCase() || "";

                    row.classList.remove("highlight-color", "highlight-size", "highlight-default");

                    if (value.includes("color")) {
                        row.classList.add("highlight-color");
                    } else if (value.includes("size")) {
                        row.classList.add("highlight-size");
                    } else {
                        row.classList.add("highlight-default");
                    }
                };

                if (input) {
                    applyHighlight();  // Initial state
                    input.addEventListener("blur", applyHighlight);
                    input.addEventListener("input", applyHighlight);  // Live feedback while typing
                }
            });
        });
    </script>
{% endblock %}

